!function(){"use strict";angular.module("angular-clockpicker",["ng.deviceDetector","angularMoment"]).factory("clockpickerService",function(){function a(a,b){var c=b&&b.trim().match(a?/^(\d{1,2}):(\d{1,2})\s*(AM|PM)$/i:/^(\d{1,2}):(\d{1,2})$/);if(c){var d=c[3]&&"PM"===c[3].toUpperCase(),e=parseInt(c[1],10),f=parseInt(c[2],10);if(!(f>59)){if(a){if(1>e||e>12)return;e=e%12+(d?12:0)}else if(e>23)return;return{hour:e,minute:f}}}}function b(b){if(b){if(b.match(/(AM|PM)\s*$/i))return a(!0,b);var c=(b.trim().match(/^\d{1,2}:\d{1,2}/)||[null])[0];return a(!1,c)}}function c(c,d,e){return c?b(e):a(d,e)}return{parseTime:c}}).value("clockpickerDefaultOptions",{twelvehour:!0,autoclose:!1,donetext:"ok"}).directive("lngClockpicker",["clockpickerService","clockpickerDefaultOptions","moment","$timeout","detectUtils",function(a,b,c,d,e){function f(d,f,g,h){function i(){return h.$modelValue?h.$modelValue.clone():c()}var j=angular.extend({},b,d.$eval(g.lngClockpickerOptions)),k=e.isMobile(),l=!j.twelvehour||k&&j.nativeOnMobile?"HH:mm":"hh:mm A";k&&j.nativeOnMobile||f.clockpicker(j),k&&(j.nativeOnMobile?f.attr("type","time"):f.is("[readonly]")||(f.attr("readonly","readonly"),f.addClass("ignore-readonly")));var m=a.parseTime.bind(null,k&&j.nativeOnMobile,j.twelvehour);d.$watch(function(){return h.$modelValue&&h.$modelValue.unix&&h.$modelValue.unix()},function(){h.$viewValue=h.$formatters.reduceRight(function(a,b){return b(a)},h.$modelValue),h.$render()}),f.blur(function(){h.$valid&&f.val(i().local().format(l))}),h.$render=function(a){f.val(h.$viewValue||"")},h.$parsers.push(function(a){var b=m(a);if(h.$setValidity("badFormat",!!b),!b)return i();var d=i().isUTC(),e=c(i());return e=e.local(),e.hour(b.hour),e.minute(b.minute),e.second(0),d?e.utc():e}),h.$formatters.push(function(a){var b=m(h.$viewValue);if(!a)return"";var c=a.clone().local(),d=!b||b.hour===c.hour()&&b.minute===c.minute();return f.is(":focus")&&d?h.$viewValue:c.format(l)})}return{restrict:"A",require:"ngModel",link:f}}])}();